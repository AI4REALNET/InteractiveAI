variables:
  CHART: "cab-assistant-platform"

.deploy-chart:
  stage: deploy
  image: alpine/k8s:1.24.16
  interruptible: true
  before_script:
    - helm repo add --username=${HARBOR_USER} --password=${HARBOR_PWD} cabrepo https://${DOCKER_REGISTRY}/chartrepo/cab
    - helm repo update
  script:
    - helm upgrade -i -n ${CLUSTER_DEV_NS} ${CHART} cabrepo/${CHART}
  rules:
    - if: $CI_COMMIT_BRANCH == "test-ci"
