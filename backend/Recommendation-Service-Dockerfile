# syntax=docker/dockerfile:1

FROM python:3.10.0-slim

RUN apt-get update && apt-get install -y default-jre

RUN mkdir /my_app
RUN mkdir /cab_common

# Install recommendation-service modules
COPY ./recommendation-service/ /my_app/
COPY ./cab_common/ /cab_common/

WORKDIR /my_app

RUN pip3 install -r requirements.txt

RUN pip3 install owlready2

WORKDIR /cab_common

RUN pip3 install .

# Install rte IA modules
WORKDIR /my_app/resources/rte/rtegrid2op_poc_simulator

RUN pip3 install -r requirements.txt

# Install SNCF IA modules
WORKDIR /my_app/resources/sncf

RUN pip3 install -r requirements.txt


WORKDIR /my_app

CMD ["./entrypoint.sh"]